<!DOCTYPE html>
<html>
<head>
	<title>Learning React.js</title>
	<!-- Bootstrap -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
	<!-- React & React DOM -->
	<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
	<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
	<!-- Babel-core -->
	<script type="text/javascript" src=https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.js></script>
	<!-- prop-types -->
	<script src="https://unpkg.com/prop-types@15.6/prop-types.js"></script>
</head>
<body>
	<div class="container">
		<div class='col-md-12'>
			<div id="app"></div>
		</div>	
	</div>
	<script type="text/babel"> 
		class App extends React.Component {

			constructor(props) {
				super(props);
				this.state = {
					text: '',
					todos: [
						{
							id: 1,
							text: "Meeting at work"
						},
						{
							id: 2,
							text: "Bring kids to school"
						},
						{
							id: 3,
							text: "Food Shopping"
						},
					]
				}
			}

			handleTodoAdd= (text) => {
				var newTodo = {
					id: this.state.todos.length + 1,
					text: text
				}

				this.setState({
					todos: this.state.todos.concat(newTodo)
				});
			}

			render() {
				return(
					<div>
						<TodoForm onTodoAdd={this.handleTodoAdd} />
						<TodoList todos={this.state.todos} />
					</div>
				)
			}
		}

		class TodoForm extends React.Component {

			onChange() {
				console.log("Changing text...")
			}	

			onSubmit = (e) => {
				e.preventDefault();
				var text = this.refs.text.value.trim();

				if(!text) {
					alert("Please enter a todo");
					return;
				}

				this.props.onTodoAdd(text);
				this.refs.text.value="";
			}

			render() {
				return(
					<div>
						<form onSubmit={this.onSubmit}>
							<div className="form-group">
								<label>Todo text</label>
								<input onChange={this.onChange} type="text" ref="text" className="form-control" />
							</div>
						</form>
					</div>
				)
			}

		}

		class TodoList extends React.Component {
			render() {
				return(
					<ul className="list-group">
						{
							this.props.todos.map(todo => {
								return <li className="list-group-item" todo={todo} key={todo.id}>{todo.text}</li>
							})
						}
					</ul>
				)
			}
		}

		ReactDOM.render(
			<App />,
			document.getElementById('app')
		);
	</script>
</body>
</html>